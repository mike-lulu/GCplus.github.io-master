# 内存
>当前版本：v1.0  
>维护人：Jhin  
>维护时间：2017年11月09日

内存对于电脑的重要性，相当于油箱对于汽车的重要性。

内存是计算机中重要的部件之一，它是与CPU进行沟通的桥梁。计算机中所有程序的运行都是在内存中进行的，因此内存的性能对计算机的影响非常大。内存(Memory)也被称为内存储器，其作用是用于暂时存放CPU中的运算数据，以及与硬盘等外部存储器交换的数据。只要计算机在运行中，CPU就会把需要运算的数据调到内存中进行运算，当运算完成后CPU再将结果传送出来，内存的运行也决定了计算机的稳定运行。 内存是由内存芯片、电路板、金手指等部分组成的。

主存（Main memory）即电脑内部最主要的存储器，用来加载各式各样的程序与数据以供CPU直接运行与运用。由于DRAM的性价比很高，且扩展性也不错，是现今一般电脑主存的最主要部分。2014年生产电脑所用的主存主要是DDR3 SDRAM，而2016年开始DDR4 SDRAM逐渐普及化，笔电厂商如华硕及宏碁开始在笔电以DDR4存储器取代DDR3L。

内存又称主存，是CPU能直接寻址的存储空间，由半导体器件制成。内存的特点是存取速率快。内存是电脑中的主要部件，它是相对于外存（硬盘）而言的。我们平常使用的程序，如Windows操作系统、打字软件、游戏软件等，一般都是安装在硬盘等外存上的，但仅此是不能使用其功能的，必须把它们调入内存中运行，才能真正使用其功能，我们平时输入一段文字，或玩一个游戏，其实都是在内存中进行的。就好比在一个书房里，存放书籍的书架和书柜相当于电脑的外存，而我们工作的办公桌就是内存。通常我们把要永久保存的、大量的数据存储在外存上，而把一些临时的或少量的数据和程序放在内存上，当然内存的好坏会直接影响电脑的运行速度。

内存就是暂时存储程序以及数据的地方，比如当我们在使用WPS处理文稿时，当你在键盘上敲入字符时，它就被存入内存中，当你选择存盘时，内存中的数据才会被存入硬（磁）盘。
## 为什么XP（32位系统）只能寻址到3.25G
+ 物理存储器和地址空间

物理存储器和存储地址空间是两个不同的概念。但是由于这两者有十分密切的关系，而且两者都用BiB（Windows表示为B）、KiB（Windows表示为KiB）、MB（Windows表示为MiB）、GB（Windows表示为GiB）来度量其容量大小，因此容易产生认识上的混淆。初学者弄清这两个不同的概念，有助于进一步认识内存储器和用好内存储器。

物理存储器是指实际存在的具体存储器芯片。如主板上装插的内存条和装载有系统的BIOS的ROM芯片，显示卡上的显示RAM芯片和装载显示BIOS的ROM芯片，以及各种适配卡上的RAM芯片和ROM芯片都是物理存储器。

存储地址空间是指对存储器编码（编码地址）的范围。所谓编码就是对每一个物理存储单元（一个字节）分配一个号码，通常叫作“编址”。分配一个号码给一个存储单元的目的是为了便于找到它，完成数据的读写，这就是所谓的“寻址”（所以，有人也把地址空间称为寻址空间）。

地址空间的大小和物理存储器的大小并不一定相等。举个例子来说明这个问题：某层楼共有17个房间，其编号为801～817。这17个房间是物理的，而其地址空间采用了三位编码，其范围是800～899共100个地址，可见地址空间是大于实际房间数量的。

对于386以上档次的微机，其地址总线为32位，因此地址空间可达2的32次方，即4GB。（虽然如此，但是我们一般使用的一些操作系统例如windows xp、却最多只能识别或者使用3.25G的内存，64位的操作系统能识别并使用4G和4G以上的的内存，

好了，现在可以解释为什么会产生诸如：常规内存、保留内存、上位内存、高端内存、扩充内存和扩展内存等不同内存类型。
## 动态随机存取内存（DRAM）的特点
+ 随机存取

所谓“随机存取”，指的是当存储器中的消息被读取或写入时，所需要的时间与这段信息所在的位置无关。相对地，有串行访问存储器包括顺序访问存储器（如：磁带）和直接访问存储器（如：磁盘）。
+ 易失性

当电源关闭时RAM不能保留数据。如果需要保存数据，就必须把它们写入一个长期的存储设备中（例如硬盘）。RAM和ROM相比，两者的最大区别是RAM在断电以后保存在上面的数据会自动消失，而ROM则不会。
+ 较高的访问速度

现代的随机存取存储器几乎是所有访问设备中写入和读取速度最快的，访问延迟也和其他涉及机械运作的存储设备（如硬盘、光驱）相比，也显得微不足道。但速度仍然不如作为CPU缓存用的SRAM。
+ 需要刷新

现代的随机存取存储器依赖电容器存储数据。电容器充满电后代表1（二进制），未充电的代表0。由于电容器或多或少有漏电的情形，若不作特别处理，电荷会渐渐随时间流失而使数据发生错误。刷新是指重新为电容器充电，弥补流失了的电荷。DRAM的读取即有刷新的功效，但一般的定时刷新并不需要作完整的读取，只需作该芯片的一个列（Row）选择，整列的数据即可获得刷新，而同一时间内，所有相关记忆芯片均可同时作同一列选择，因此，在一段期间内逐一做完所有列的刷新，即可完成所有存储器的刷新。需要刷新正好解释了随机存取存储器的易失性。
+ 对静电敏感

正如其他精细的集成电路，随机存取存储器对环境的静电荷非常敏感。静电会干扰存储器内电容器的电荷，引致数据流失，甚至烧坏电路。故此触碰随机存取存储器前，应先用手触摸金属接地。
+ 价格不断下降

虽然价格不断下降，但是自2016年12月开始，中国的内存因为工艺升级开始涨价，何时降价未知。
## 频率
内存主频和CPU主频一样，习惯上被用来表示内存的速度，它代表着该内存所能达到的最高工作频率。内存主频是以MHz（兆赫）为单位来计量的。内存主频越高在一定程度上代表着内存所能达到的速度越快。

内存主频决定着该内存最高能在什么样的频率正常工作。目前较为主流的内存频率是1600MHz的DDR3内存，以及一些内存频率更高的DDR4内存。

大家知道，计算机系统的时钟速度是以频率来衡量的。晶体振荡器控制着时钟速度，在石英晶片上加上电压，其就以正弦波的形式震动起来，这一震动可以通过晶片的形变和大小记录下来。晶体的震动以正弦调和变化的电流的形式表现出来，这一变化的电流就是时钟信号。而内存本身并不具备晶体振荡器，因此内存工作时的时钟信号是由主板芯片组的北桥或直接由主板的时钟发生器提供的，也就是说内存无法决定自身的工作频率，其实际工作频率是由主板来决定的。

DDR内存和DDR2内存的频率可以用工作频率和等效频率两种方式表示，工作频率是内存颗粒实际的工作频率，但是由于DDR内存可以在脉冲的上升和下降沿都传输数据，因此传输数据的等效频率是工作频率的两倍；而DDR2内存每个时钟能够以四倍于工作频率的速度读/写数据，因此传输数据的等效频率是工作频率的四倍。例如DDR 200/266/333/400的工作频率分别是100/133/166/200MHz，而等效频率分别是200/266/333/400MHz；DDR2 400/533/667/800的工作频率分别是100/133/166/200MHz，而等效频率分别是400/533/667/800MHz。
## 内存的使用

电脑运行时，电脑的主内存按照被使用情况可分类为：
```
|可利用（Available）物理内存：可立即分配给程序使用的内存。包括：
|  |
|  | --- 空闲（Free）物理内存：完全未被使用，内容为全0
|  | --- 缓存（Cached）物理内存
|  |      |---备用（standby）物理内存：操作系统预先把可能要用到的硬盘数据加载所占用的内存，还没被用户进程所使用，因此可随时丢弃从新初始化为0.
|  |      |---已修改（modified）物理内存：已被修改过的caching用途的内存，可在任意时刻写回硬盘文件（不是分页文件）然后被重用。由于硬盘I/O，已修改（modified）物理内存不能计入空闲（Free）物理内存
|被使用（used）物理内存：已经被进程使用的内存
|   |---  用户进程使用的物理内存，即工作集(Working set)。Working Set包含了可能被其他程序共享的内存, 例如DLL。所以所有进程的Working Set加起来有可能大于实际的被使用（used）的物理内存。Private Bytes是只被本进程提交（commit）的虚拟地址空间，不包括其他进程共享的内存。Virtual Byte是整个进程占用的全部虚拟地址空间。32位Windows用户模式下，进程最大可以使用2GiB，可以通过修改Boot.ini文件扩展为最大可以使用到3GiB。task manager中的Memory Usage对应的是working set, VM Size对应的是private bytes.
|   |---  核心进程使用的物理内存
|   |         |---分页的核心进程使用的物理内存：可以交换到分页文件中，从而可被回收的物理内存
|   |         |---未分页（Non paged）的核心进程使用的物理内存：不能交换到分页文件的内存，总是要保留在物理内存中
|硬件保留（hardware reserved）的物理内存：被CPU中的GPU核心或者其他外设硬件占用的，不由操作系统使用的内存。
```  
## 内存条
内存芯片的状态一直沿用到286初期，鉴于它存在着无法拆卸更换的弊病，这对于计算机的发展造成了现实的阻碍。有鉴于此，内存条便应运而生了。将内存芯片焊接到事先设计好的印刷线路板上，而电脑主板上也改用内存插槽。这样就把内存难以安装和更换的问题彻底解决了。
## 章节来源
+ [随机存储器-维基百科](https://zh.wikipedia.org/wiki/%E9%9A%8F%E6%9C%BA%E5%AD%98%E5%8F%96%E5%AD%98%E5%82%A8%E5%99%A8)

## 历史版本

| 版本号 | 维护人 |维护时间 |维护内容|
| :- | :- | :-| :- |
| v1.0 | [Jhin](http://blog.link-lin.cn) |2017-11-09|创建了本词条|
